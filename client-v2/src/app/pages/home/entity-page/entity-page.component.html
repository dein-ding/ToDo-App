<app-main-pane>
    <ng-container header>
        <!-- <div class="header-border | absolute bottom-0 h-[1px] w-full bg-tinted-800 transition-opacity" -->
        <!--     [class.opacity-0]="!isScrolled && !isSecondaryProgressBarVisible"></div> -->

        <div
            class="header-progress | absolute bottom-0 left-0 h-[2px] bg-submit-500 transition-opacity"
            [class.opacity-0]="!isSecondaryProgressBarVisible"
            [style.width]="progress + '%'"
        ></div>

        <app-breadcrumbs [breadcrumbs]="(breadcrumbs$ | async) || []"></app-breadcrumbs>

        <div cdkMenuBar>
            <button
                cdkMenuItem
                class="button-icon-naked menu-item | py-2 px-4"
                appTooltip="Here will be some options for the current open document"
            >
                <app-icon iconClass="fas fa-ellipsis-v"></app-icon>
            </button>
        </div>

        <app-menu-toggle></app-menu-toggle>
    </ng-container>

    <ng-container main>
        <div class="mb-4" *ngIf="activeTaskList$ | async as activeTaskList">
            <!-- <div class="flex gap-1 text-tinted-300 opacity-0 transition-opacity group-hover:opacity-100"> -->
            <!--     <button class="button-naked">Add Sublist</button> -->
            <!--     <button class="button-naked">Add Description</button> -->
            <!-- </div> -->
            <!-- dont know 'bout these ones: -->
            <!-- <button class="button-naked">Add Task</button> -->
            <!-- <button class="button-naked">Share</button> -->

            <h1 class="heading | mt-4">
                <page-entity-icon class="mr-2.5 inline-block -translate-y-0.5 text-2xl" [icon]="EntityType.TASKLIST">
                </page-entity-icon>

                <span class="title">{{ activeListName$ | async }}</span>
            </h1>

            <div class="description | text-tinted-300 outline-none" contenteditable>
                <p>And this is the part for the description</p>
                <p>Where you can</p>
                <ul>
                    <li>Describe the list/task in further detail</li>
                    <li>Take notes for yourself</li>
                    <li>Quickly write down / sketch out ideas</li>
                </ul>
            </div>
        </div>

        <div
            class="progress-container | group sticky -top-3 z-30 mb-5 flex items-center gap-2 bg-tinted-900 pt-4 pb-3 shadow-header"
        >
            <div
                #progressBar
                class="progress | h-1.5 grow rounded bg-tinted-700 transition-colors group-hover:bg-tinted-600"
                appTooltip="{{ progress }}% closed - {{ closedTasks }}/{{ allTasks }}"
                [tooltipOptions]="{ closeOnHostClick: false }"
            >
                <div class="h-full rounded bg-submit-400 transition-shadow" [style.width]="progress + '%'"></div>
            </div>
            <button
                class="text-sm text-tinted-600 transition-colors group-hover:text-submit-400"
                (click)="isShownAsPercentage = !isShownAsPercentage"
            >
                {{ isShownAsPercentage ? progress + '%' : closedTasks + ' / ' + allTasks }}
            </button>
        </div>

        <app-tasks-demo></app-tasks-demo>
    </ng-container>
</app-main-pane>
