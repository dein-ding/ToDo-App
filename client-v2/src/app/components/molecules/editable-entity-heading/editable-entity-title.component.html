<div class="inline-flex items-center" *ngIf="entity$ | async as entity">
    <ng-template #icon>
        <app-icon
            class="text-2xl"
            [iconClass]="(isLoading$ | async) ? EntityState.LOADING : entity.status || entity.entityType"
        >
        </app-icon>
    </ng-template>

    <div class="mr-2.5 inline-block -translate-y-0.5">
        <button
            *ngIf="taskStatusMenuItems$ | async as statusItems; else elseBlock"
            [cdkMenuTriggerFor]="statusMenu"
            class="icon-btn"
        >
            <ng-container *ngTemplateOutlet="icon"></ng-container>
            <ng-template #statusMenu>
                <app-drop-down [items]="statusItems" [data]="{ id: entity.id }"></app-drop-down>
            </ng-template>
        </button>

        <ng-template #elseBlock>
            <ng-container *ngTemplateOutlet="icon"></ng-container>
        </ng-template>
    </div>

    <app-inline-editor
        class="title"
        [textInput]="(entity$ | async)?.title || ''"
        [placeholder]="ENTITY_TITLE_DEFAULTS[entity.entityType]"
        (update)="titleUpdates$.next($event)"
        editorClass="pr-14"
        data-test-name="editable-entity-name"
    ></app-inline-editor>
</div>
